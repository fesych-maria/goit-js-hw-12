{"version":3,"file":"index.js","sources":["../src/img/error.svg","../src/img/info.svg","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cg%20fill='%23FAFAFB'%20clip-path='url(%23a)'%3e%3cpath%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20d='M6.969%206.969a.75.75%200%200%201%201.062%200L12%2010.939l3.969-3.97a.75.75%200%201%201%201.062%201.062L13.06%2012l3.97%203.969a.752.752%200%200%201-1.062%201.062l-3.97-3.97-3.968%203.97a.753.753%200%200%201-1.225-.244.751.751%200%200%201%20.163-.818L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h24v24H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cg%20fill='%23FAFAFB'%20id='icomoon-ignore'%3e%3c/g%3e%3cpath%20fill='%23fff'%20d='M224%20152c0-13.2%2010.8-24%2024-24h16c13.2%200%2024%2010.8%2024%2024v16c0%2013.2-10.8%2024-24%2024h-16c-13.2%200-24-10.8-24-24v-16z'%3e%3c/path%3e%3cpath%20fill='%23fff'%20d='M320%20384h-128v-32h32v-96h-32v-32h96v128h32z'%3e%3c/path%3e%3cpath%20fill='%23fff'%20d='M256%200c-141.385%200-256%20114.615-256%20256s114.615%20256%20256%20256%20256-114.615%20256-256-114.615-256-256-256zM256%20464c-114.875%200-208-93.125-208-208s93.125-208%20208-208%20208%2093.125%20208%20208-93.125%20208-208%20208z'%3e%3c/path%3e%3c/svg%3e\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from '../main.js';\n\nfunction imgTemplate(img) {\n  return `<li class=\"gallery-item\">\n          <div class=\"img-wrapper\">\n          <a href=\"${img.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" class=\"gallery-img\" />\n          </a>\n          </div>\n          <ul class=\"img-text-list\">\n            <li class=\"img-text-item first-category\">\n              <p class=\"img-text-category\">Likes</p>\n              <p class=\"img-text-value\">${img.likes}</p>\n            </li>\n            <li class=\"img-text-item second-category\">\n              <p class=\"img-text-category\">Views</p>\n              <p class=\"img-text-value\">${img.views}</p>\n            </li>\n            <li class=\"img-text-item third-category\">\n              <p class=\"img-text-category\">Comments</p>\n              <p class=\"img-text-value\">${img.comments}</p>\n            </li>\n            <li class=\"img-text-item\">\n              <p class=\"img-text-category\">Downloads</p>\n              <p class=\"img-text-value\">${img.downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n}\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function imagesTemplate(images) {\n  const markup = images.map(imgTemplate).join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n  return markup;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nimport { imagesTemplate } from './render-functions.js';\nimport { errorObj } from '../main.js';\n\nexport async function fetchImages(params) {\n  try {\n    const res = await axios.get('/api/', { params });\n    const result = res.data.hits;\n    params.totalHits = res.data.totalHits;\n    if (result.length === 0) {\n      throw new Error();\n    }\n    imagesTemplate(result);\n  } catch {\n    iziToast.error(errorObj);\n    return;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iconError from './img/error.svg';\nimport iconInfo from './img/info.svg';\nimport { fetchImages } from './js/pixabay-api.js';\n\nexport const refs = {\n  searchBtn: document.querySelector('.js-search-btn'),\n  searchInput: document.querySelector('.js-search-field'),\n  form: document.querySelector('.js-search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadBtn: document.querySelector('.load-btn'),\n  loader: document.querySelector('.loader'),\n};\n\nexport const errorObj = {\n  position: 'topRight',\n  message: \"We're sorry, but you've reached the end of search results.\",\n  messageColor: '#fafafb',\n  messageSize: '16px',\n  backgroundColor: '#ef4040',\n  iconUrl: iconError,\n};\n\nexport const infoObj = {\n  position: 'topRight',\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  messageColor: '#fafafb',\n  messageSize: '16px',\n  backgroundColor: '#09f',\n  iconUrl: iconInfo,\n};\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadBtn.addEventListener('click', loadMore);\n\nconst fetchParameters = {\n  key: '48862080-31d0d2e2035ba3e1d36ba0d4d',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 40,\n};\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  showLoader();\n  const inputValue = refs.searchInput.value.trim();\n  if (!inputValue) {\n    return;\n  }\n  fetchParameters.q = inputValue;\n  fetchParameters.page = 1;\n  refs.gallery.innerHTML = '';\n  refs.form.reset();\n  await fetchImages(fetchParameters);\n  checkEndOfCollection();\n  hideOnlyLoader();\n}\n\nasync function loadMore() {\n  fetchParameters.page += 1;\n  showLoader();\n  await fetchImages(fetchParameters);\n  checkEndOfCollection();\n  hideOnlyLoader();\n  onScroll();\n}\n\nfunction hideOnlyLoader() {\n  refs.loader.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('visually-hidden');\n  refs.loadBtn.classList.add('visually-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('visually-hidden');\n  refs.loadBtn.classList.remove('visually-hidden');\n}\n\nfunction checkEndOfCollection() {\n  const maxPage = Math.ceil(\n    fetchParameters.totalHits / fetchParameters.per_page\n  );\n  if (maxPage === 0) {\n    refs.loadBtn.classList.add('visually-hidden');\n    return;\n  }\n  if (fetchParameters.page >= maxPage) {\n    iziToast.info(infoObj);\n    refs.loadBtn.classList.add('visually-hidden');\n  } else {\n    refs.loadBtn.classList.remove('visually-hidden');\n  }\n}\n\nfunction onScroll() {\n  const imgLi = document.querySelector('.gallery-item');\n  const height = imgLi.getBoundingClientRect().height;\n  const totalHeight = height * 2;\n  window.scrollBy({\n    top: totalHeight,\n    behavior: 'smooth',\n  });\n}\n"],"names":["iconError","iconInfo","imgTemplate","img","gallery","SimpleLightbox","imagesTemplate","images","markup","refs","axios","fetchImages","params","res","result","iziToast","errorObj","infoObj","onSubmit","loadMore","fetchParameters","showLoader","inputValue","checkEndOfCollection","hideOnlyLoader","onScroll","maxPage","totalHeight"],"mappings":"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"}